<div class="container">
	<% if @book.errors.any? %>
	<div id="error_explanation">
		<h3><%= pluralize(@book.errors.count, "error") %> prohibited this obj from being saved::</h3>
		<ul>
			<% @book.errors.full_messages.each do |message| %>
			<li><%= message %></li>
			<% end %>
		</ul>
	</div>
	<% end %>
	<%= render 'devise/shared/show', user: @user, book: @book %>
	<div class="col-xs-9">
		<h2>Books</h2>
		<table class="table table-hover table-inverse">
			<thead>
				<tr>
					<th></th>
					<th>Title</th>
					<th>Opinion</th>
					<th colspan="3"></th>
				</tr>
			</thead>

			<tbody>
				<% @books.each do |book| %>
				<tr>
					<td>
						<%= link_to user_path(book.user_id) do %>
						<%= attachment_image_tag book.user, :profile_image, :fill, 50, 50, fallback: "no_image.jpg",size:'40x40' %>
					</td>
					<td>
						<%= link_to book.title, book_path(book) %>
					</td>
					<td>
						<%= book.body %>
						<% end %>

						
						<td>いいね件数: <%= book.favorites.count %><td>
							<% if current_user.favorited_by?(book.id) %>
								<td><%= link_to 'いいね外す', destroy_favorite_path(book), method: :DELETE %></td>
							<% else %>
								<td><%= link_to 'いいねする',  create_favorite_path(book), method: :POST %></td>
							<% end %>
							<td>コメント件数: <%= book.book_comments.count %> </td>

					</td>
				</tr>
				<% end %>
			</tbody>
		</div>
	</table>
</div>